# configai

> 配置中心 REST API。客户端通过 HTTP GET + API Key 读取项目配置，支持 JSON 和环境变量两种格式。

Base URL: `http://{host}:3000`
认证: 请求头 `X-API-Key: {key}`，Key 绑定到具体项目。

## API 端点

### GET /api/v1/projects/{project}/envs/{env}/configs
获取合并后的全部配置。

响应:
```json
{
  "project": "my-app",
  "environment": "prod",
  "configs": {"db_host": "localhost", "db_port": 5432},
  "env_vars": {"DB_HOST": "localhost", "DB_PORT": "5432"}
}
```

### GET /api/v1/projects/{project}/envs/{env}/configs/{key}
获取单个配置项。

响应: `{"key": "db_host", "value": "localhost"}`

### GET /api/v1/projects/{project}/envs/{env}/export?prefix={PREFIX}
导出为 shell 环境变量格式。prefix 可选。

响应（纯文本）:
```
export DB_HOST=localhost
export DB_PORT=5432
```

## 错误码

- 401: 缺少或无效 API Key
- 403: Key 无权访问该项目
- 404: 项目/环境/配置项不存在

响应: `{"error": "描述信息"}`

## 环境变量转换

db_host → DB_HOST, redis.url → REDIS_URL, api-timeout → API_TIMEOUT
prefix=APP → APP_DB_HOST
对象/数组值 → JSON 字符串

## 详细集成指南

- [完整集成文档](llms-full.txt): 多语言代码示例、Shell/Docker/K8s 集成、错误处理最佳实践
